{"ast":null,"code":"var _jsxFileName = \"/Users/spencerbackman/Work/mr-cash/client/src/Offer/Price.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { getValue, getVin } from '../redux/BlackValue';\nimport { emailSent, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice } from '../redux/Form';\nimport '../assets/css/price.css';\n\nclass Price extends React.Component {\n  constructor() {\n    super();\n\n    this.getPrice = () => {\n      var props = this.props;\n      var condition = props.form.condition;\n      return props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n        if (this.props.form.vin.length > 0) {\n          props.addYear(res.model_year);\n          props.addMake(res.make);\n          props.addModel(res.model);\n          props.addStyle(res.style);\n          props.addUvc(res.uvc);\n        }\n\n        var price = 0;\n\n        if (condition === 'clean') {\n          price = parseInt(res.adjusted_tradein_clean, 10);\n        } else if (condition === 'average') {\n          price = parseInt(res.adjusted_tradein_avg, 10);\n        } else {\n          price = parseInt(res.adjusted_tradein_rough, 10);\n        }\n\n        if (this.props.form.basePrice !== price) {\n          props.addBasePrice(price);\n        }\n\n        if (!this.state.basePrice) {\n          this.setState({\n            basePrice: true\n          });\n        }\n\n        return this.getRange(price);\n      });\n    };\n\n    this.getRange = price => {\n      var low;\n      var high;\n\n      if (low < 1500) {\n        if (!this.state.noOffer) {\n          this.setState({\n            noOffer: true\n          });\n        }\n\n        low = 0;\n        high = 0;\n        this.props.addHighPrice(0);\n        this.props.addLowPrice(0);\n        return this.sendEmail(low, high);\n      } else {\n        low = price * 0.7;\n        high = price * 0.9;\n        this.props.addHighPrice(parseInt(high, 10));\n        this.props.addLowPrice(parseInt(low, 10));\n      }\n\n      if (this.props.files) {\n        var low;\n        var high;\n\n        if (this.props.files.length < 1) {\n          low = price * 0.7;\n          high = price * 0.8;\n\n          if (low < 1500) {\n            if (!this.state.noOffer) {\n              this.setState({\n                noOffer: true\n              });\n            }\n\n            this.props.addHighPrice(0);\n            this.props.addLowPrice(0);\n            return this.sendEmail(low, high);\n          } else {\n            this.props.addHighPrice(parseInt(high, 10));\n            this.props.addLowPrice(parseInt(low, 10));\n            return this.sendEmail(low, high);\n          }\n        } else {\n          low = price * 0.8;\n          high = price * 0.9;\n\n          if (low < 1500) {\n            if (!this.state.noOffer) {\n              this.setState({\n                noOffer: true\n              });\n            }\n\n            this.props.addHighPrice(0);\n            this.props.addLowPrice(0);\n            return this.sendEmail(low, high);\n          } else {\n            this.props.addHighPrice(parseInt(high, 10));\n            this.props.addLowPrice(parseInt(low, 10));\n            return this.sendEmail(low, high);\n          }\n        }\n      } else {\n        var low;\n        var high;\n\n        if (low < 1500) {\n          if (!this.state.noOffer) {\n            this.setState({\n              noOffer: true\n            });\n          }\n\n          low = 0;\n          high = 0;\n          this.props.addHighPrice(0);\n          this.props.addLowPrice(0);\n          return this.sendEmail(low, high);\n        } else {\n          high = price * 0.8;\n          low = price * 0.7;\n          this.props.addHighPrice(parseInt(high, 10));\n          this.props.addLowPrice(parseInt(low, 10));\n          return this.sendEmail(low, high);\n        }\n      }\n    };\n\n    this.sendEmail = (low, high) => {\n      let form = this.props.form;\n\n      if (!this.props.form.sent) {\n        if (this.state.noOffer) {\n          var message = {\n            lowPrice: \"We will get back to you shortly with a \",\n            highPrice: \"offer.\",\n            name: form.name,\n            from: form.email,\n            phone: form.phone,\n            year: form.year,\n            make: form.make,\n            model: form.model,\n            style: form.style,\n            uvc: form.uvc,\n            vin: form.vin,\n            zip: form.zip,\n            condition: form.condition,\n            files: form.files,\n            miles: form.miles\n          };\n          return this.props.sendEmail(message);\n        } else {\n          var message2 = {\n            lowPrice: low - 800,\n            highPrice: high - 800,\n            name: form.name,\n            from: form.email,\n            phone: form.phone,\n            year: form.year,\n            make: form.make,\n            model: form.model,\n            style: form.style,\n            uvc: form.uvc,\n            vin: form.vin,\n            zip: form.zip,\n            condition: form.condition,\n            files: form.files,\n            miles: form.miles\n          };\n          this.props.sendEmail(message2);\n          this.props.emailSent(true);\n          return this.setState({\n            finishedLoading: true\n          });\n        }\n      } else {\n        if (!this.state.finishedLoading) {\n          return this.setState({\n            finishedLoading: true\n          });\n        }\n      }\n    };\n\n    this.state = {\n      usedVin: false,\n      finishedLoading: false,\n      noOffer: false,\n      basePrice: false,\n      gettingPrice: false\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.form.vin.length === 17) {\n      await this.props.getVin(this.props.form.vin, this.props.form.miles);\n    } else {\n      await this.props.getValue(this.props.form.uvc, this.props.form.miles);\n    }\n  }\n\n  componentDidUpdate() {\n    try {\n      if (this.props.blackValue.used_vehicles.used_vehicle_list.map(res => res) && !this.state.gettingPrice) {\n        this.getPrice();\n        this.setState({\n          gettingPrice: true\n        });\n      }\n    } catch (error) {\n      this.forceUpdate();\n      console.dir(error);\n    }\n  }\n\n  render() {\n    return this.state.finishedLoading ? React.createElement(\"div\", {\n      className: \"pricing-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"price-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, this.state.noOffer ? React.createElement(\"h2\", {\n      className: \"price-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Unable to provide an instant offer. We will send an offer within 24hrs\") : React.createElement(\"h2\", {\n      className: \"price-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Your instant offer has been sent to your email.\"), React.createElement(\"h2\", {\n      className: \"price-vehicle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, this.props.form.year, \" \", this.props.form.make, \" \", this.props.form.model, \" \", this.props.form.style), React.createElement(\"p\", {\n      className: \"price-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Thank you for using Sell It To Me. Your instant offer has been sent to your email. We will send you an official offer within 24hrs.\"))) : React.createElement(\"div\", {\n      className: \"pricing-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"price-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"price-vehicle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \" Getting your vehicles value. \"), React.createElement(\"p\", {\n      className: \"price-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"Thank you for using Sell It To Me. Your instant offer has been sent to your email. We will send you an official offer within 24hrs. In the email we will explain further steps to get cash for your vehicle.\")));\n  }\n\n}\n\nexport default connect(state => state, {\n  sendEmail,\n  emailSent,\n  getValue,\n  getVin,\n  addYear,\n  addMake,\n  addModel,\n  addStyle,\n  addLowPrice,\n  addHighPrice,\n  addUvc,\n  addBasePrice\n})(Price);","map":{"version":3,"sources":["/Users/spencerbackman/Work/mr-cash/client/src/Offer/Price.js"],"names":["React","connect","sendEmail","getValue","getVin","emailSent","addYear","addMake","addModel","addStyle","addLowPrice","addHighPrice","addUvc","addBasePrice","Price","Component","constructor","getPrice","props","condition","form","blackValue","used_vehicles","used_vehicle_list","map","res","vin","length","model_year","make","model","style","uvc","price","parseInt","adjusted_tradein_clean","adjusted_tradein_avg","adjusted_tradein_rough","basePrice","state","setState","getRange","low","high","noOffer","files","sent","message","lowPrice","highPrice","name","from","email","phone","year","zip","miles","message2","finishedLoading","usedVin","gettingPrice","componentDidMount","componentDidUpdate","error","forceUpdate","console","dir","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { getValue, getVin } from '../redux/BlackValue';\nimport { emailSent, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice } from '../redux/Form';\nimport '../assets/css/price.css';\n\nclass Price extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            usedVin: false,\n            finishedLoading: false,\n            noOffer: false,\n            basePrice: false,\n            gettingPrice: false\n        }\n    }\n    async componentDidMount() {\n        if(this.props.form.vin.length === 17) {\n           await this.props.getVin(this.props.form.vin, this.props.form.miles)\n        } else {\n            await this.props.getValue(this.props.form.uvc, this.props.form.miles)\n        }\n    }\n    componentDidUpdate() {\n        try {\n            if(this.props.blackValue.used_vehicles.used_vehicle_list.map(res => res) && !this.state.gettingPrice) {\n                this.getPrice();\n                this.setState({\n                    gettingPrice: true\n                })\n            }\n        } catch(error) {\n            this.forceUpdate();\n            console.dir(error)\n        }\n    }\n\n    getPrice = () => {\n        var props = this.props;\n        var condition = props.form.condition;\n        return props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n            if(this.props.form.vin.length > 0) {\n                props.addYear(res.model_year);\n                props.addMake(res.make);\n                props.addModel(res.model);\n                props.addStyle(res.style);\n                props.addUvc(res.uvc);\n            }\n            var price = 0;\n            if(condition === 'clean') {\n                price = parseInt(res.adjusted_tradein_clean, 10)\n            } else if (condition === 'average') {\n                price = parseInt(res.adjusted_tradein_avg, 10)\n            } else {\n                price = parseInt(res.adjusted_tradein_rough, 10)\n            }\n            if(this.props.form.basePrice !== price) {\n                props.addBasePrice(price);\n            }\n            if(!this.state.basePrice) {\n                this.setState({ basePrice: true })\n            }\n            return this.getRange(price);\n        })\n    }\n    getRange = (price) => {\n        var low;\n        var high;\n        if(low < 1500) {\n            if(!this.state.noOffer) {\n                this.setState({\n                    noOffer: true\n                })\n            }\n            low = 0;\n            high = 0;\n            this.props.addHighPrice(0);\n            this.props.addLowPrice(0);\n            return this.sendEmail(low, high)\n        } else {\n            low = price * 0.7;\n            high = price * 0.9;\n            this.props.addHighPrice(parseInt(high, 10));\n            this.props.addLowPrice(parseInt(low, 10))\n        }\n        if(this.props.files) {\n            var low;\n            var high;\n            if(this.props.files.length < 1) {\n                low = price * 0.7;\n                high = price * 0.8;\n                if(low < 1500) {\n                    if(!this.state.noOffer) {\n                        this.setState({\n                            noOffer: true\n                        })\n                    }\n                    this.props.addHighPrice(0);\n                    this.props.addLowPrice(0);\n                    return this.sendEmail(low, high);\n                } else {\n                    this.props.addHighPrice(parseInt(high, 10));\n                    this.props.addLowPrice(parseInt(low, 10));\n                    return this.sendEmail(low, high);\n                }\n            } else {\n                low = price * 0.8;\n                high = price * 0.9;\n                if(low < 1500) {\n                    if(!this.state.noOffer) {\n                        this.setState({\n                            noOffer: true\n                        })\n                    }\n                    this.props.addHighPrice(0);\n                    this.props.addLowPrice(0);\n                    return this.sendEmail(low, high);\n                } else {\n                    this.props.addHighPrice(parseInt(high, 10));\n                    this.props.addLowPrice(parseInt(low, 10));\n                    return this.sendEmail(low, high);\n                }\n            }\n        } else {\n            var low;\n            var high;\n            if(low < 1500) {\n                if(!this.state.noOffer) {\n                    this.setState({\n                        noOffer: true\n                    })\n                }\n                low = 0;\n                high = 0;\n                this.props.addHighPrice(0);\n                this.props.addLowPrice(0);\n                return this.sendEmail(low, high);\n            } else {\n                high = price * 0.8;\n                low = price * 0.7;\n                this.props.addHighPrice(parseInt(high, 10));\n                this.props.addLowPrice(parseInt(low, 10));\n                return this.sendEmail(low, high);\n            }\n        }\n    }\n\n    sendEmail = (low, high) => {\n        let form = this.props.form\n        if(!this.props.form.sent) {\n            if(this.state.noOffer) {\n                var message = {\n                    lowPrice: \"We will get back to you shortly with a \",\n                    highPrice: \"offer.\",\n                    name: form.name,\n                    from: form.email,\n                    phone: form.phone,\n                    year: form.year,\n                    make: form.make,\n                    model: form.model,\n                    style: form.style,\n                    uvc: form.uvc,\n                    vin: form.vin,\n                    zip: form.zip,\n                    condition: form.condition,\n                    files: form.files,\n                    miles: form.miles\n                }\n                return this.props.sendEmail(message);\n            } else {\n                var message2 = {\n                    lowPrice: low - 800,\n                    highPrice: high - 800,\n                    name: form.name,\n                    from: form.email,\n                    phone: form.phone,\n                    year: form.year,\n                    make: form.make,\n                    model: form.model,\n                    style: form.style,\n                    uvc: form.uvc,\n                    vin: form.vin,\n                    zip: form.zip,\n                    condition: form.condition,\n                    files: form.files,\n                    miles: form.miles\n                }\n                this.props.sendEmail(message2);\n                this.props.emailSent(true);\n                return this.setState({\n                    finishedLoading: true\n                })\n            }\n        } else {\n            if(!this.state.finishedLoading) {\n                return this.setState({ finishedLoading: true })\n            }\n        }\n    }\n    render() {\n        return (\n            this.state.finishedLoading \n            ?\n            <div className=\"pricing-page\">\n                <div className=\"price-container\">\n                    {this.state.noOffer ? \n                        <h2 className=\"price-range\"> \n                            Unable to provide an instant offer. We will send an offer within 24hrs \n                        </h2> \n                    : \n                        <h2 className=\"price-range\">\n                            Your instant offer has been sent to your email.\n                        </h2>\n                    }\n                    <h2 className=\"price-vehicle\"> \n                        {this.props.form.year} {this.props.form.make} {this.props.form.model} {this.props.form.style} \n                    </h2>\n                    <p className=\"price-text\"> \n                        Thank you for using Sell It To Me. Your instant offer has been sent to your email. We will send you an official offer within 24hrs.\n                    </p>\n                </div>\n            </div>\n            : \n            <div className=\"pricing-page\">\n                <div className=\"price-container\">\n                    <h2 className=\"price-vehicle\"> Getting your vehicles value. </h2>\n                    <p className=\"price-text\"> \n                        Thank you for using Sell It To Me. Your instant offer has been sent to your email. We will send you an official offer within 24hrs. In the email we will explain further steps to get cash for your vehicle.\n                    </p>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(state => state, { sendEmail, emailSent, getValue, getVin, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice })(Price)"]},"metadata":{},"sourceType":"module"}