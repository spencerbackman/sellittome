{"ast":null,"code":"var _jsxFileName = \"/Users/spencerbackman/Development/mr-cash/client/src/ValueForm/Offer.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { emailSent } from '../redux/Form';\nimport '../assets/scss/price.scss';\n\nclass Offer extends React.Component {\n  constructor() {\n    super();\n\n    this.getPrice = () => {\n      var condition = this.props.form.condition;\n\n      if (this.state.value === 0) {\n        if (this.state.usedVin) {\n          this.props.years.result[0].map(res => {\n            var year = res.modelyear;\n            var make = res.make;\n            var model = res.model;\n            var body = res.body;\n            var vehicleId = res.ucgvehicleid;\n            var price = 0;\n\n            if (condition === 'clean') {\n              price = parseInt(res.adjustedcleantrade, 10);\n            } else if (condition === 'average') {\n              price = parseInt(res.adjustedaveragetrade, 10);\n            } else {\n              price = parseInt(res.adjustedroughtrade, 10);\n            }\n\n            this.setState({\n              year: year,\n              make: make,\n              model: model,\n              style: body,\n              vehicleId: vehicleId,\n              value: price\n            });\n          });\n        } else {\n          this.props.years.result.map(res => {\n            var price = 0;\n\n            if (condition === 'clean') {\n              price = parseInt(res.adjustedcleantrade, 10);\n            } else if (condition === 'average') {\n              price = parseInt(res.adjustedaveragetrade, 10);\n            } else {\n              price = parseInt(res.adjustedroughtrade, 10);\n            }\n\n            var form = this.props.form;\n            this.setState({\n              year: form.year,\n              model: form.model,\n              make: form.make,\n              style: form.style,\n              vehicleId: form.vehicleId,\n              value: price\n            });\n          });\n        }\n      }\n\n      this.getRange();\n    };\n\n    this.getRange = () => {\n      if (this.state.lowOffer === 0 || this.state.highOffer === 0 && this.state.value > 0) {\n        let fileLength = this.props.form.files.length;\n        var low = 0;\n        var high = 0;\n        var price = this.state.value;\n\n        if (fileLength > 0) {\n          low = price * .8 - 800;\n          high = price * .9 - 800;\n        } else {\n          low = price * .7;\n          high = price * .8;\n        }\n\n        this.setState({\n          lowOffer: low,\n          highOffer: high\n        });\n      }\n    };\n\n    this.sendEmail = () => {\n      var form = this.props.form;\n      var state = this.state;\n\n      if (!form.sent) {\n        var message = {\n          lowPrice: state.lowOffer,\n          highPrice: state.highOffer,\n          name: form.name,\n          from: form.email,\n          phone: form.phone,\n          year: state.year,\n          make: state.make,\n          model: state.model,\n          style: state.style,\n          vehicleId: state.vehicleId,\n          vin: state.vin,\n          zip: form.zip,\n          condition: form.condition,\n          files: form.files,\n          miles: form.miles\n        };\n        this.props.sendEmail(message);\n        this.props.emailSent(true);\n      }\n    };\n\n    this.state = {\n      value: 0,\n      lowOffer: 0,\n      highOffer: 0,\n      year: '',\n      make: '',\n      model: '',\n      style: '',\n      vehicleId: '',\n      vin: '',\n      usedVin: false,\n      finishedLoading: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.form.vin.length === 17 && !this.state.usedVin) {\n      this.setState({\n        usedVin: true\n      });\n    }\n\n    if (this.props.years.result.map(res => res.adjustedcleantrade)) {\n      this.getPrice();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.state.value !== 0) {\n      this.getRange();\n    }\n\n    if (this.state.lowOffer !== 0 && this.state.highOffer !== 0) {\n      this.sendEmail();\n    }\n  }\n\n  render() {\n    console.log(\"OFFER STATE: \", this.state);\n    console.log(\"OFFER PROPS: \", this.props);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pricing-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"price-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"price-vehicle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \" \", this.state.year, \" \", this.state.make, \" \", this.state.model, \" \"), React.createElement(\"h2\", {\n      className: \"price-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \" $\", this.state.lowPrice, \" - $\", this.state.highPrice, \" \"), React.createElement(\"p\", {\n      className: \"price-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \" If you decide to continue we will send you a final offer within 24 hours. The price can go up or down from the range. If you accept the offer we will come to you and pick up the vehicle and you'll get paid!  \"))));\n  }\n\n}\n\nexport default connect(state => state, {\n  sendEmail,\n  emailSent\n})(Offer);","map":{"version":3,"sources":["/Users/spencerbackman/Development/mr-cash/client/src/ValueForm/Offer.js"],"names":["React","connect","sendEmail","emailSent","Offer","Component","constructor","getPrice","condition","props","form","state","value","usedVin","years","result","map","res","year","modelyear","make","model","body","vehicleId","ucgvehicleid","price","parseInt","adjustedcleantrade","adjustedaveragetrade","adjustedroughtrade","setState","style","getRange","lowOffer","highOffer","fileLength","files","length","low","high","sent","message","lowPrice","highPrice","name","from","email","phone","vin","zip","miles","finishedLoading","componentDidMount","componentDidUpdate","render","console","log"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { emailSent } from '../redux/Form';\nimport '../assets/scss/price.scss';\n\nclass Offer extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            value: 0,\n            lowOffer: 0,\n            highOffer: 0,\n            year: '',\n            make: '',\n            model: '',\n            style: '',\n            vehicleId: '',\n            vin: '',\n            usedVin: false,\n            finishedLoading: false\n        }\n    }\n    componentDidMount() {\n        if(this.props.form.vin.length === 17 && !this.state.usedVin) {\n            this.setState({ usedVin: true })\n        }\n        if(this.props.years.result.map(res => res.adjustedcleantrade)) {\n            this.getPrice()\n        }\n    }\n    componentDidUpdate() {\n        if(this.state.value !== 0) {\n            this.getRange()\n        }\n        if(this.state.lowOffer !== 0 && this.state.highOffer !== 0) {\n            this.sendEmail();\n        }\n    }\n    getPrice = () => {\n        var condition = this.props.form.condition;\n        if(this.state.value === 0) {\n            if(this.state.usedVin) {\n                this.props.years.result[0].map(res => {\n                    var year = res.modelyear;\n                    var make = res.make;\n                    var model = res.model;\n                    var body = res.body;\n                    var vehicleId = res.ucgvehicleid;\n                    var price = 0;\n                    if(condition === 'clean') {\n                        price = parseInt(res.adjustedcleantrade, 10)\n                    } else if (condition === 'average') {\n                        price = parseInt(res.adjustedaveragetrade, 10)\n                    } else {\n                        price = parseInt(res.adjustedroughtrade, 10)\n                    }\n                    this.setState({ year: year, make: make, model: model,\n                        style: body, vehicleId: vehicleId, value: price })\n                })\n            } else {\n                this.props.years.result.map(res => {\n                    var price = 0;\n                    if(condition === 'clean') {\n                        price = parseInt(res.adjustedcleantrade, 10)\n                    } else if (condition === 'average') {\n                        price = parseInt(res.adjustedaveragetrade, 10)\n                    } else {\n                        price = parseInt(res.adjustedroughtrade, 10)\n                    }\n                    var form = this.props.form\n                    this.setState({ year: form.year, model: form.model, make: form.make,\n                        style: form.style, vehicleId: form.vehicleId, value: price })\n                })\n            }\n        }\n        this.getRange()\n    }\n\n    getRange = () => {\n        if( this.state.lowOffer === 0 || this.state.highOffer === 0 && this.state.value > 0) {\n            let fileLength = this.props.form.files.length;\n            var low = 0;\n            var high = 0;\n            var price = this.state.value\n            if(fileLength > 0) {\n                low = ((price * .8) - 800)\n                high = ((price * .9) - 800)\n            } else {\n                low = (price * .7)\n                high = (price * .8)\n            }\n            this.setState({\n                lowOffer: low,\n                highOffer: high\n            })\n        }\n    }\n\n    sendEmail = () => {\n        var form = this.props.form;\n        var state = this.state\n        if(!form.sent) {\n            var message = {\n                lowPrice: state.lowOffer,\n                highPrice: state.highOffer,\n                name: form.name,\n                from: form.email,\n                phone: form.phone,\n                year: state.year,\n                make: state.make,\n                model: state.model,\n                style: state.style,\n                vehicleId: state.vehicleId,\n                vin: state.vin,\n                zip: form.zip,\n                condition: form.condition,\n                files: form.files,\n                miles: form.miles\n            }\n            this.props.sendEmail(message);\n            this.props.emailSent(true)\n        }   \n    }\n    render() {\n        console.log(\"OFFER STATE: \", this.state)\n        console.log(\"OFFER PROPS: \", this.props)\n        return (\n            <div>\n                <div className=\"pricing-page\">\n                    <div className=\"price-container\">\n                        <h2 className=\"price-vehicle\"> {this.state.year} {this.state.make} {this.state.model} </h2>\n                        <h2 className=\"price-range\"> ${this.state.lowPrice} - ${this.state.highPrice} </h2>\n                        <p className=\"price-text\"> If you decide to continue we will send you a final offer within 24 hours. The price can go up or down from the range. If you accept the offer we will come to you and pick up the vehicle and you'll get paid!  </p>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(state => state, { sendEmail, emailSent })(Offer);"]},"metadata":{},"sourceType":"module"}