{"ast":null,"code":"var _jsxFileName = \"/Users/spencerbackman/Work/mr-cash/client/src/Offer/Price.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { getValue, getVin } from '../redux/BlackValue';\nimport { emailSent, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice } from '../redux/Form';\nimport '../assets/css/price.css';\n\nclass Price extends React.Component {\n  constructor() {\n    super();\n\n    this.getPrice = () => {\n      var props = this.props;\n      var form = props.form;\n      var condition = form.condition;\n      this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n        if (this.state.usedVin) {\n          props.addYear(res.model_year);\n          props.addMake(res.make);\n          props.addModel(res.model);\n          props.addStyle(res.style);\n          props.addUvc(res.uvc);\n        }\n\n        var price = parseInt(res.adjusted_tradein_ + condition, 10);\n\n        if (this.props.form.basePrice !== price || !this.state.basePrice) {\n          props.addBasePrice(price);\n          this.setState({\n            basePrice: true\n          });\n        }\n\n        return this.getRange();\n      });\n    };\n\n    this.getRange = () => {\n      if ((this.props.lowPrice === 0 || this.props.form.highPrice === 0) && this.props.basePrice !== 0) {\n        let fileLength = this.props.form.files.length;\n        var price = this.props.form.basePrice;\n        var low = price;\n        var high = price;\n\n        if (fileLength > 0) {\n          low = low * 0.8;\n          high = high * 0.9;\n        } else {\n          low = low * 0.8;\n          high = high * 0.9;\n        }\n\n        if (low - 800 < 0 && !this.state.noOffer) {\n          this.setState({\n            noOffer: true\n          });\n        } else {\n          this.props.addHighPrice(high);\n          this.props.addLowPrice(low);\n        }\n      }\n\n      if (!this.props.form.sent) {\n        return this.sendEmail();\n      } else if (this.props.form.sent && !this.state.finishedLoading) {\n        this.setState({\n          finishedLoading: true\n        });\n      }\n    };\n\n    this.sendEmail = () => {\n      console.log(\"SEND EMAIL\");\n      let form = this.props.form;\n      var message;\n\n      if (this.state.noOffer) {\n        message = {\n          lowPrice: \"NO\",\n          highPrice: \"OFFER\",\n          name: form.name,\n          from: form.email,\n          phone: form.phone,\n          year: form.year,\n          make: form.make,\n          model: form.model,\n          style: form.style,\n          uvc: form.uvc,\n          vin: form.vin,\n          zip: form.zip,\n          condition: form.condition,\n          files: form.files,\n          miles: form.miles\n        };\n      } else {\n        message = {\n          lowPrice: parseInt(form.lowPrice - 800),\n          highPrice: parseInt(form.highPrice - 800),\n          name: form.name,\n          from: form.email,\n          phone: form.phone,\n          year: form.year,\n          make: form.make,\n          model: form.model,\n          style: form.style,\n          uvc: form.uvc,\n          vin: form.vin,\n          zip: form.zip,\n          condition: form.condition,\n          files: form.files,\n          miles: form.miles\n        };\n      }\n\n      this.props.sendEmail(message);\n      this.props.emailSent(true);\n\n      if (!this.state.finishedLoading) {\n        return this.setState({\n          finishedLoading: true\n        });\n      }\n    };\n\n    this.state = {\n      usedVin: false,\n      finishedLoading: false,\n      noOffer: false,\n      basePrice: false\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.form.vin.length === 17 && !this.state.usedVin) {\n      this.setState({\n        usedVin: true\n      });\n    }\n\n    try {\n      var promise = new Promise(function () {\n        if (this.state.usedVin) {\n          return this.props.getVin(this.props.form.vin, this.props.form.miles);\n        } else {\n          return this.props.getValue(this.props.form.uvc, this.props.form.miles);\n        }\n      });\n      await promise.then(this.getPrice());\n    } catch (err) {\n      console.log(err);\n      throw err;\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, this.state.finishedLoading ? React.createElement(\"div\", {\n      className: \"pricing-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"price-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"price-vehicle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \" \", this.props.form.year, \" \", this.props.form.make, \" \", this.props.form.model, \" \", this.props.form.style, \" \"), this.state.noOffer ? React.createElement(\"h2\", {\n      className: \"price-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \" Unable to provide an instant offer. We will send an offer within 24hrs \") : React.createElement(\"h2\", {\n      className: \"price-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \" $\", parseInt(this.props.form.lowPrice - 800), \" - $\", parseInt(this.props.form.highPrice - 800), \" \"), React.createElement(\"p\", {\n      className: \"price-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Thank you for using Sell It To Me. We will send you an official offer within 24hrs. We have sent an email explaining further steps and giving you the chance to send us pictures if you haven't already.\"))) : null);\n  }\n\n} // class Price extends React.Component {\n//     constructor() {\n//         super()\n//         this.state = {\n//             usedVin: false,\n//             finishedLoading: false,\n//             noOffer: false,\n//             basePrice: false\n//         }\n//     }\n//     componentDidMount() {\n//         if(this.props.form.vin.length === 17) {\n//             if(!this.state.usedVin) {\n//                 this.setState({\n//                     usedVin: true\n//                 })\n//             }\n//             return this.props.getVin(this.props.form.vin, this.props.form.miles)\n//         } else {\n//             return this.props.getValue(this.props.form.uvc, this.props.form.miles)\n//         }\n//     }\n//     componentDidUpdate() {\n//         if(this.props.blackValue.used_vehicles.used_vehicle_list.length > 0 && !this.state.basePrice) {\n//             this.getPrice();\n//         }\n//     }\n//     getPrice = () => {\n//         var props = this.props;\n//         var condition = props.form.condition;\n//         this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n//             if(res.year !== props.form.year || res.make !== props.form.make || res.model !== props.form.model) {\n//                 props.addYear(res.model_year);\n//                 props.addMake(res.make);\n//                 props.addModel(res.model);\n//                 props.addStyle(res.style);\n//                 props.addUvc(res.uvc);\n//             }\n//             var price = 0;\n//             if(condition === 'clean') {\n//                 price = parseInt(res.adjusted_tradein_clean, 10)\n//             } else if (condition === 'average') {\n//                 price = parseInt(res.adjusted_tradein_avg, 10)\n//             } else {\n//                 price = parseInt(res.adjusted_tradein_rough, 10)\n//             }\n//             if(this.props.form.basePrice !== price) {\n//                 props.addBasePrice(price);\n//             }\n//             if(!this.state.basePrice) {\n//                 this.setState({\n//                     basePrice: true\n//                 })\n//             }\n//             return this.getRange();\n//         })\n//     }\n//     getRange = () => {\n//         console.log(\"GET RANGE\")\n//         if( ((this.props.form.lowPrice === 0 || this.props.form.highPrice === 0) && this.props.form.basePrice !== 0)) {\n//             let fileLength = this.props.form.files.length;\n//             var price = this.props.form.basePrice;\n//             var low = price;\n//             var high = price;\n//             if(fileLength > 0) {\n//                 low = (low * 0.8)\n//                 high = (high * 0.9)\n//             } else {\n//                 low = (low * .7)\n//                 high = (high * .8)\n//             }\n//             if((low - 800) < 0 && !this.state.noOffer) {\n//                 this.setState({ noOffer: true })\n//             } else {\n//                 this.props.addHighPrice(high);\n//                 this.props.addLowPrice(low);\n//             }\n//         }\n//         if(!this.props.form.sent) {\n//             return this.sendEmail();\n//         } else if(this.props.form.sent && !this.state.finishedLoading) {\n//             this.setState({\n//                 finishedLoading: true\n//             })\n//         }\n//     }\n//     sendEmail = () => {\n//         console.log(\"SEND EMAIL\")\n//         let form = this.props.form\n//         if(this.state.noOffer) {\n//             var message = {\n//                 lowPrice: \"NO\",\n//                 highPrice: \"OFFER\",\n//                 name: form.name,\n//                 from: form.email,\n//                 phone: form.phone,\n//                 year: form.year,\n//                 make: form.make,\n//                 model: form.model,\n//                 style: form.style,\n//                 uvc: form.uvc,\n//                 vin: form.vin,\n//                 zip: form.zip,\n//                 condition: form.condition,\n//                 files: form.files,\n//                 miles: form.miles\n//             }\n//             this.props.sendEmail(message);\n//         } else {\n//             var message2 = {\n//                 lowPrice: parseInt(form.lowPrice - 800),\n//                 highPrice: parseInt(form.highPrice - 800),\n//                 name: form.name,\n//                 from: form.email,\n//                 phone: form.phone,\n//                 year: form.year,\n//                 make: form.make,\n//                 model: form.model,\n//                 style: form.style,\n//                 uvc: form.uvc,\n//                 vin: form.vin,\n//                 zip: form.zip,\n//                 condition: form.condition,\n//                 files: form.files,\n//                 miles: form.miles\n//             }\n//             this.props.sendEmail(message2);\n//             this.props.emailSent(true);\n//         }\n//         if(!this.state.finishedLoading) {\n//             return this.setState({ finishedLoading: true })\n//         }\n//     }\n//     render() {\n//         return (\n//             <div>      \n//                 {this.state.finishedLoading \n//                 ? \n//                 <div className=\"pricing-page\">\n//                     <div className=\"price-container\">\n//                         <h2 className=\"price-vehicle\"> {this.props.form.year} {this.props.form.make} {this.props.form.model} {this.props.form.style} </h2>\n//                         {this.state.noOffer \n//                         ? <h2 className=\"price-range\"> Unable to provide an instant offer. We will send an offer within 24hrs </h2> \n//                         :\n//                         <h2 className=\"price-range\"> ${parseInt(this.props.form.lowPrice - 800)} - ${parseInt(this.props.form.highPrice - 800)} </h2>\n//                         }\n//                         <p className=\"price-text\"> \n//                             Thank you for using Sell It To Me. We will send you an official offer within 24hrs. We have sent an email explaining further steps and giving you the chance to send us pictures if you haven't already.\n//                         </p>\n//                     </div>\n//                 </div>\n//                 : null}\n//             </div>\n//         )\n//     }\n// }\n\n\nexport default connect(state => state, {\n  sendEmail,\n  emailSent,\n  getValue,\n  getVin,\n  addYear,\n  addMake,\n  addModel,\n  addStyle,\n  addLowPrice,\n  addHighPrice,\n  addUvc,\n  addBasePrice\n})(Price);","map":{"version":3,"sources":["/Users/spencerbackman/Work/mr-cash/client/src/Offer/Price.js"],"names":["React","connect","sendEmail","getValue","getVin","emailSent","addYear","addMake","addModel","addStyle","addLowPrice","addHighPrice","addUvc","addBasePrice","Price","Component","constructor","getPrice","props","form","condition","blackValue","used_vehicles","used_vehicle_list","map","res","state","usedVin","model_year","make","model","style","uvc","price","parseInt","adjusted_tradein_","basePrice","setState","getRange","lowPrice","highPrice","fileLength","files","length","low","high","noOffer","sent","finishedLoading","console","log","message","name","from","email","phone","year","vin","zip","miles","componentDidMount","promise","Promise","then","err","render"],"mappings":"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AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAevC,OAAO,CAACyB,KAAK,IAAIA,KAAV,EAAiB;AAAExB,EAAAA,SAAF;AAAaG,EAAAA,SAAb;AAAwBF,EAAAA,QAAxB;AAAkCC,EAAAA,MAAlC;AAA0CE,EAAAA,OAA1C;AAAmDC,EAAAA,OAAnD;AAA4DC,EAAAA,QAA5D;AAAsEC,EAAAA,QAAtE;AAAgFC,EAAAA,WAAhF;AAA6FC,EAAAA,YAA7F;AAA2GC,EAAAA,MAA3G;AAAmHC,EAAAA;AAAnH,CAAjB,CAAP,CAA2JC,KAA3J,CAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { getValue, getVin } from '../redux/BlackValue';\nimport { emailSent, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice } from '../redux/Form';\nimport '../assets/css/price.css';\n\nclass Price extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            usedVin: false,\n            finishedLoading: false,\n            noOffer: false,\n            basePrice: false\n        }\n    }\n    async componentDidMount() {\n        if(this.props.form.vin.length === 17 && !this.state.usedVin) {\n            this.setState({ \n                usedVin: true\n            })\n        }\n        try {\n            var promise = new Promise( function() {\n                if(this.state.usedVin) {\n                    return this.props.getVin(this.props.form.vin, this.props.form.miles)\n                } else {\n                    return this.props.getValue(this.props.form.uvc, this.props.form.miles)\n                }\n            })\n            await promise \n                .then(this.getPrice())\n        } catch (err) {\n            console.log(err)\n            throw err;\n        }\n    }\n\n    getPrice = () => {\n        var props = this.props;\n        var form = props.form;\n        var condition = form.condition;\n        this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n            if(this.state.usedVin) {\n                props.addYear(res.model_year);\n                props.addMake(res.make);\n                props.addModel(res.model);\n                props.addStyle(res.style);\n                props.addUvc(res.uvc);\n            }\n            var price = parseInt(res.adjusted_tradein_ + condition, 10)\n            if(this.props.form.basePrice !== price || !this.state.basePrice) {\n                props.addBasePrice(price)\n                this.setState({\n                    basePrice: true\n                })\n            }\n            return this.getRange();\n        })\n    }\n    getRange = () => {\n        if((this.props.lowPrice === 0 || this.props.form.highPrice === 0) && this.props.basePrice !== 0) {\n            let fileLength = this.props.form.files.length;\n            var price = this.props.form.basePrice;\n            var low = price;\n            var high = price;\n            if( fileLength > 0 ) {\n                low = (low * 0.8);\n                high = (high * 0.9);\n            } else {\n                low = (low * 0.8)\n                high = (high * 0.9);\n            }\n            if((low - 800) < 0 && !this.state.noOffer) {\n                this.setState({ noOffer: true })\n            } else {\n                this.props.addHighPrice(high);\n                this.props.addLowPrice(low);\n            }\n        }\n        if(!this.props.form.sent) {\n            return this.sendEmail();\n        } else if(this.props.form.sent && !this.state.finishedLoading) {\n            this.setState({\n                finishedLoading: true\n            })\n        }\n    }\n    sendEmail = () => {\n        console.log(\"SEND EMAIL\")\n        let form = this.props.form\n        var message;\n        if(this.state.noOffer) {\n            message = {\n                lowPrice: \"NO\",\n                highPrice: \"OFFER\",\n                name: form.name,\n                from: form.email,\n                phone: form.phone,\n                year: form.year,\n                make: form.make,\n                model: form.model,\n                style: form.style,\n                uvc: form.uvc,\n                vin: form.vin,\n                zip: form.zip,\n                condition: form.condition,\n                files: form.files,\n                miles: form.miles\n            }\n        } else {\n            message = {\n                lowPrice: parseInt(form.lowPrice - 800),\n                highPrice: parseInt(form.highPrice - 800),\n                name: form.name,\n                from: form.email,\n                phone: form.phone,\n                year: form.year,\n                make: form.make,\n                model: form.model,\n                style: form.style,\n                uvc: form.uvc,\n                vin: form.vin,\n                zip: form.zip,\n                condition: form.condition,\n                files: form.files,\n                miles: form.miles\n            }\n        }\n        this.props.sendEmail(message);\n        this.props.emailSent(true);\n        if(!this.state.finishedLoading) {\n            return this.setState({ finishedLoading: true })\n        }\n    }\n    render() {\n        return (\n            <div>      \n                {this.state.finishedLoading \n                ? \n                <div className=\"pricing-page\">\n                    <div className=\"price-container\">\n                        <h2 className=\"price-vehicle\"> {this.props.form.year} {this.props.form.make} {this.props.form.model} {this.props.form.style} </h2>\n                        {this.state.noOffer \n                        ? <h2 className=\"price-range\"> Unable to provide an instant offer. We will send an offer within 24hrs </h2> \n                        :\n                        <h2 className=\"price-range\"> ${parseInt(this.props.form.lowPrice - 800)} - ${parseInt(this.props.form.highPrice - 800)} </h2>\n                        }\n                        <p className=\"price-text\"> \n                            Thank you for using Sell It To Me. We will send you an official offer within 24hrs. We have sent an email explaining further steps and giving you the chance to send us pictures if you haven't already.\n                        </p>\n                    </div>\n                </div>\n                : null}\n            </div>\n        )\n    }\n}\n\n// class Price extends React.Component {\n//     constructor() {\n//         super()\n//         this.state = {\n//             usedVin: false,\n//             finishedLoading: false,\n//             noOffer: false,\n//             basePrice: false\n//         }\n//     }\n//     componentDidMount() {\n//         if(this.props.form.vin.length === 17) {\n//             if(!this.state.usedVin) {\n//                 this.setState({\n//                     usedVin: true\n//                 })\n//             }\n//             return this.props.getVin(this.props.form.vin, this.props.form.miles)\n//         } else {\n//             return this.props.getValue(this.props.form.uvc, this.props.form.miles)\n//         }\n//     }\n//     componentDidUpdate() {\n//         if(this.props.blackValue.used_vehicles.used_vehicle_list.length > 0 && !this.state.basePrice) {\n//             this.getPrice();\n//         }\n//     }\n\n//     getPrice = () => {\n//         var props = this.props;\n//         var condition = props.form.condition;\n//         this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n//             if(res.year !== props.form.year || res.make !== props.form.make || res.model !== props.form.model) {\n//                 props.addYear(res.model_year);\n//                 props.addMake(res.make);\n//                 props.addModel(res.model);\n//                 props.addStyle(res.style);\n//                 props.addUvc(res.uvc);\n//             }\n//             var price = 0;\n//             if(condition === 'clean') {\n//                 price = parseInt(res.adjusted_tradein_clean, 10)\n//             } else if (condition === 'average') {\n//                 price = parseInt(res.adjusted_tradein_avg, 10)\n//             } else {\n//                 price = parseInt(res.adjusted_tradein_rough, 10)\n//             }\n//             if(this.props.form.basePrice !== price) {\n//                 props.addBasePrice(price);\n//             }\n//             if(!this.state.basePrice) {\n//                 this.setState({\n//                     basePrice: true\n//                 })\n//             }\n//             return this.getRange();\n//         })\n//     }\n\n//     getRange = () => {\n//         console.log(\"GET RANGE\")\n//         if( ((this.props.form.lowPrice === 0 || this.props.form.highPrice === 0) && this.props.form.basePrice !== 0)) {\n//             let fileLength = this.props.form.files.length;\n//             var price = this.props.form.basePrice;\n//             var low = price;\n//             var high = price;\n//             if(fileLength > 0) {\n//                 low = (low * 0.8)\n//                 high = (high * 0.9)\n//             } else {\n//                 low = (low * .7)\n//                 high = (high * .8)\n//             }\n//             if((low - 800) < 0 && !this.state.noOffer) {\n//                 this.setState({ noOffer: true })\n//             } else {\n//                 this.props.addHighPrice(high);\n//                 this.props.addLowPrice(low);\n//             }\n//         }\n//         if(!this.props.form.sent) {\n//             return this.sendEmail();\n//         } else if(this.props.form.sent && !this.state.finishedLoading) {\n//             this.setState({\n//                 finishedLoading: true\n//             })\n//         }\n//     }\n\n//     sendEmail = () => {\n//         console.log(\"SEND EMAIL\")\n//         let form = this.props.form\n//         if(this.state.noOffer) {\n//             var message = {\n//                 lowPrice: \"NO\",\n//                 highPrice: \"OFFER\",\n//                 name: form.name,\n//                 from: form.email,\n//                 phone: form.phone,\n//                 year: form.year,\n//                 make: form.make,\n//                 model: form.model,\n//                 style: form.style,\n//                 uvc: form.uvc,\n//                 vin: form.vin,\n//                 zip: form.zip,\n//                 condition: form.condition,\n//                 files: form.files,\n//                 miles: form.miles\n//             }\n//             this.props.sendEmail(message);\n//         } else {\n//             var message2 = {\n//                 lowPrice: parseInt(form.lowPrice - 800),\n//                 highPrice: parseInt(form.highPrice - 800),\n//                 name: form.name,\n//                 from: form.email,\n//                 phone: form.phone,\n//                 year: form.year,\n//                 make: form.make,\n//                 model: form.model,\n//                 style: form.style,\n//                 uvc: form.uvc,\n//                 vin: form.vin,\n//                 zip: form.zip,\n//                 condition: form.condition,\n//                 files: form.files,\n//                 miles: form.miles\n//             }\n//             this.props.sendEmail(message2);\n//             this.props.emailSent(true);\n//         }\n//         if(!this.state.finishedLoading) {\n//             return this.setState({ finishedLoading: true })\n//         }\n//     }\n//     render() {\n//         return (\n//             <div>      \n//                 {this.state.finishedLoading \n//                 ? \n//                 <div className=\"pricing-page\">\n//                     <div className=\"price-container\">\n//                         <h2 className=\"price-vehicle\"> {this.props.form.year} {this.props.form.make} {this.props.form.model} {this.props.form.style} </h2>\n//                         {this.state.noOffer \n//                         ? <h2 className=\"price-range\"> Unable to provide an instant offer. We will send an offer within 24hrs </h2> \n//                         :\n//                         <h2 className=\"price-range\"> ${parseInt(this.props.form.lowPrice - 800)} - ${parseInt(this.props.form.highPrice - 800)} </h2>\n//                         }\n//                         <p className=\"price-text\"> \n//                             Thank you for using Sell It To Me. We will send you an official offer within 24hrs. We have sent an email explaining further steps and giving you the chance to send us pictures if you haven't already.\n//                         </p>\n//                     </div>\n//                 </div>\n//                 : null}\n//             </div>\n//         )\n//     }\n// }\n\nexport default connect(state => state, { sendEmail, emailSent, getValue, getVin, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice })(Price)\n"]},"metadata":{},"sourceType":"module"}