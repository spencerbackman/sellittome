{"ast":null,"code":"var _jsxFileName = \"/Users/spencerbackman/Work/mr-cash/client/src/Offer/Price.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { getValue, getVin } from '../redux/BlackValue';\nimport { emailSent, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice } from '../redux/Form';\nimport '../assets/css/price.css';\n\nclass Price extends React.Component {\n  constructor() {\n    super();\n\n    this.getPrice = () => {\n      console.log(\"GETTING PRICE\");\n      var props = this.props;\n      var condition = props.form.condition;\n\n      if (this.props.form.basePrice === 0) {\n        if (this.state.usedVin) {\n          this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n            props.addYear(res.modelyear);\n            props.addMake(res.make);\n            props.addModel(res.model);\n            props.addStyle(res.body);\n            props.addUvc(res.uvc);\n            var price = 0;\n\n            if (condition === 'clean') {\n              price = parseInt(res.adjusted_tradein_clean, 10);\n            } else if (condition === 'average') {\n              price = parseInt(res.adjusted_tradein_avg, 10);\n            } else {\n              price = parseInt(res.adjusted_tradein_rough, 10);\n            }\n\n            if (this.props.form.basePrice !== price) {\n              props.addBasePrice(price);\n            }\n\n            return this.getRange();\n          });\n        } else {\n          this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n            var price = 0;\n\n            if (condition === 'clean') {\n              price = parseInt(res.adjusted_tradein_clean, 10);\n            } else if (condition === 'average') {\n              price = parseInt(res.adjusted_tradein_avg, 10);\n            } else {\n              price = parseInt(res.adjusted_tradein_rough, 10);\n            }\n\n            console.log(price);\n\n            if (this.props.form.basePrice !== price) {\n              this.props.addBasePrice(price);\n            }\n\n            return this.getRange();\n          });\n        }\n      }\n    };\n\n    this.getRange = () => {\n      console.log(\"GET RANGE\");\n\n      if ((this.props.form.lowPrice === 0 || this.props.form.highPrice === 0) && this.props.form.basePrice !== 0) {\n        let fileLength = this.props.form.files.length;\n        var price = this.props.form.basePrice;\n        var low = price;\n        var high = price;\n\n        if (fileLength > 0) {\n          low = low * 0.8;\n          high = high * 0.9;\n        } else {\n          low = low * .7;\n          high = high * .8;\n        }\n\n        if (low - 800 < 0 && !this.state.noOffer) {\n          console.log('noOffer');\n          this.setState({\n            noOffer: true\n          });\n        } else {\n          console.log(high);\n          console.log(low);\n          this.props.addHighPrice(high);\n          this.props.addLowPrice(low);\n        }\n      }\n    };\n\n    this.sendEmail = () => {\n      console.log(\"SEND EMAIL\");\n      let form = this.props.form;\n\n      if (!form.sent) {\n        if (this.state.noOffer) {\n          var message = {\n            lowPrice: \"NO\",\n            highPrice: \"OFFER\",\n            name: form.name,\n            from: form.email,\n            phone: form.phone,\n            year: form.year,\n            make: form.make,\n            model: form.model,\n            style: form.style,\n            uvc: form.uvc,\n            vin: form.vin,\n            zip: form.zip,\n            condition: form.condition,\n            files: form.files,\n            miles: form.miles\n          };\n          this.props.sendEmail(message);\n          this.props.emailSent(true);\n        } else {\n          var message2 = {\n            lowPrice: parseInt(form.lowPrice - 800),\n            highPrice: parseInt(form.highPrice - 800),\n            name: form.name,\n            from: form.email,\n            phone: form.phone,\n            year: form.year,\n            make: form.make,\n            model: form.model,\n            style: form.style,\n            uvc: form.uvc,\n            vin: form.vin,\n            zip: form.zip,\n            condition: form.condition,\n            files: form.files,\n            miles: form.miles\n          };\n          this.props.sendEmail(message2);\n          this.props.emailSent(true);\n        }\n      } else {\n        if (!this.state.finishedLoading) {\n          this.setState({\n            finishedLoading: true\n          });\n        }\n      }\n    };\n\n    this.state = {\n      usedVin: false,\n      finishedLoading: false,\n      noOffer: false\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.form.vin.length === 17) {\n      await this.props.getVin();\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.form.vin.length === 17 && !this.state.usedVin) {\n      this.setState({\n        usedVin: true\n      });\n    } else {\n      this.setState({\n        usedVin: false\n      });\n    }\n\n    if (this.props.form.lowPrice > 0 && this.props.form.highPrice > 0) {\n      this.sendEmail();\n    } else if (this.props.form.basePrice > 0) {\n      this.getRange();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.blackValue.used_vehicles) {\n      this.getPrice();\n    }\n\n    if (this.props.form.basePrice > 0) {\n      this.getRange();\n    }\n\n    if (this.props.form.lowPrice > 0 && this.props.form.highPrice > 0) {\n      this.sendEmail();\n    }\n  }\n\n  render() {\n    console.log(this.props);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, this.state.finishedLoading ? React.createElement(\"div\", {\n      className: \"pricing-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"price-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"price-vehicle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \" \", this.props.form.year, \" \", this.props.form.make, \" \", this.props.form.model, \" \", this.props.form.style, \" \"), this.state.noOffer ? React.createElement(\"h2\", {\n      className: \"price-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \" Unable to provide an instant offer. We will send an offer within 24hrs \") : React.createElement(\"h2\", {\n      className: \"price-range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \" $\", parseInt(this.props.form.lowPrice - 800), \" - $\", parseInt(this.props.form.highPrice - 800), \" \"), React.createElement(\"p\", {\n      className: \"price-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Thank you for using Sell It To Me. We will send you an official offer within 24hrs. We have sent an email explaining further steps and giving you the chance to send us pictures if you haven't already.\"))) : null);\n  }\n\n}\n\nexport default connect(state => state, {\n  sendEmail,\n  emailSent,\n  getValue,\n  getVin,\n  addYear,\n  addMake,\n  addModel,\n  addStyle,\n  addLowPrice,\n  addHighPrice,\n  addUvc,\n  addBasePrice\n})(Price);","map":{"version":3,"sources":["/Users/spencerbackman/Work/mr-cash/client/src/Offer/Price.js"],"names":["React","connect","sendEmail","getValue","getVin","emailSent","addYear","addMake","addModel","addStyle","addLowPrice","addHighPrice","addUvc","addBasePrice","Price","Component","constructor","getPrice","console","log","props","condition","form","basePrice","state","usedVin","blackValue","used_vehicles","used_vehicle_list","map","res","modelyear","make","model","body","uvc","price","parseInt","adjusted_tradein_clean","adjusted_tradein_avg","adjusted_tradein_rough","getRange","lowPrice","highPrice","fileLength","files","length","low","high","noOffer","setState","sent","message","name","from","email","phone","year","style","vin","zip","miles","message2","finishedLoading","componentDidMount","componentDidUpdate","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { sendEmail } from '../redux/email';\nimport { getValue, getVin } from '../redux/BlackValue';\nimport { emailSent, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice } from '../redux/Form';\nimport '../assets/css/price.css';\n\nclass Price extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            usedVin: false,\n            finishedLoading: false,\n            noOffer: false\n        }\n    }\n    async componentDidMount() {\n        if(this.props.form.vin.length === 17) {\n            await this.props.getVin()\n        }\n    }\n    componentDidMount() {\n        if(this.props.form.vin.length === 17 && !this.state.usedVin) {\n            this.setState({ usedVin: true })\n        } else {\n            this.setState({ usedVin: false })\n        }\n        if(this.props.form.lowPrice > 0 && this.props.form.highPrice > 0) {\n            this.sendEmail()\n        } else if(this.props.form.basePrice > 0) {\n            this.getRange()\n        } \n    }\n    componentDidUpdate() {\n        if(this.props.blackValue.used_vehicles) {\n            this.getPrice()\n        }\n        if(this.props.form.basePrice > 0) {\n            this.getRange()\n        }\n        if(this.props.form.lowPrice > 0 && this.props.form.highPrice > 0) {\n            this.sendEmail();\n        }\n    }\n\n    getPrice = () => {\n        console.log(\"GETTING PRICE\")\n        var props = this.props;\n        var condition = props.form.condition;\n        if(this.props.form.basePrice === 0) {\n            if(this.state.usedVin) {\n                this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n                    props.addYear(res.modelyear);\n                    props.addMake(res.make);\n                    props.addModel(res.model);\n                    props.addStyle(res.body);\n                    props.addUvc(res.uvc);\n                    var price = 0;\n                    if(condition === 'clean') {\n                        price = parseInt(res.adjusted_tradein_clean, 10)\n                    } else if (condition === 'average') {\n                        price = parseInt(res.adjusted_tradein_avg, 10)\n                    } else {\n                        price = parseInt(res.adjusted_tradein_rough, 10)\n                    }\n                    if(this.props.form.basePrice !== price) {\n                        props.addBasePrice(price);\n                    }\n                    return this.getRange();\n                })\n            } else {\n                this.props.blackValue.used_vehicles.used_vehicle_list.map(res => {\n                    var price = 0;\n                    if(condition === 'clean') {\n                        price = parseInt(res.adjusted_tradein_clean, 10)\n                    } else if (condition === 'average') {\n                        price = parseInt(res.adjusted_tradein_avg, 10)\n                    } else {\n                        price = parseInt(res.adjusted_tradein_rough, 10)\n                    }\n                    console.log(price)\n                    if(this.props.form.basePrice !== price) {\n                        this.props.addBasePrice(price);\n                    }\n                    return this.getRange()\n                })\n            }\n        } \n    }\n\n    getRange = () => {\n        console.log(\"GET RANGE\")\n        if( ((this.props.form.lowPrice === 0 || this.props.form.highPrice === 0) && this.props.form.basePrice !== 0)) {\n            let fileLength = this.props.form.files.length;\n            var price = this.props.form.basePrice;\n            var low = price;\n            var high = price;\n            if(fileLength > 0) {\n                low = (low * 0.8)\n                high = (high * 0.9)\n            } else {\n                low = (low * .7)\n                high = (high * .8)\n            }\n            if((low - 800) < 0 && !this.state.noOffer) {\n                console.log('noOffer')\n                this.setState({ noOffer: true })\n            } else {\n                console.log(high)\n                console.log(low)\n                this.props.addHighPrice(high);\n                this.props.addLowPrice(low);\n            }\n        }\n    }\n\n    sendEmail = () => {\n        console.log(\"SEND EMAIL\")\n        let form = this.props.form\n        if(!form.sent) {\n            if(this.state.noOffer) {\n                var message = {\n                    lowPrice: \"NO\",\n                    highPrice: \"OFFER\",\n                    name: form.name,\n                    from: form.email,\n                    phone: form.phone,\n                    year: form.year,\n                    make: form.make,\n                    model: form.model,\n                    style: form.style,\n                    uvc: form.uvc,\n                    vin: form.vin,\n                    zip: form.zip,\n                    condition: form.condition,\n                    files: form.files,\n                    miles: form.miles\n                }\n                this.props.sendEmail(message);\n                this.props.emailSent(true);\n            } else {\n                var message2 = {\n                    lowPrice: parseInt(form.lowPrice - 800),\n                    highPrice: parseInt(form.highPrice - 800),\n                    name: form.name,\n                    from: form.email,\n                    phone: form.phone,\n                    year: form.year,\n                    make: form.make,\n                    model: form.model,\n                    style: form.style,\n                    uvc: form.uvc,\n                    vin: form.vin,\n                    zip: form.zip,\n                    condition: form.condition,\n                    files: form.files,\n                    miles: form.miles\n                }\n                this.props.sendEmail(message2);\n                this.props.emailSent(true);\n            }\n        } else {\n            if(!this.state.finishedLoading) {\n                this.setState({ finishedLoading: true })\n            }\n        }\n    }\n    render() {\n        console.log(this.props)\n        return (\n            <div>      \n                {this.state.finishedLoading \n                ? \n                <div className=\"pricing-page\">\n                    <div className=\"price-container\">\n                        <h2 className=\"price-vehicle\"> {this.props.form.year} {this.props.form.make} {this.props.form.model} {this.props.form.style} </h2>\n                        {this.state.noOffer \n                        ? <h2 className=\"price-range\"> Unable to provide an instant offer. We will send an offer within 24hrs </h2> \n                        :\n                        <h2 className=\"price-range\"> ${parseInt(this.props.form.lowPrice - 800)} - ${parseInt(this.props.form.highPrice - 800)} </h2>\n                        }\n                        <p className=\"price-text\"> \n                            Thank you for using Sell It To Me. We will send you an official offer within 24hrs. We have sent an email explaining further steps and giving you the chance to send us pictures if you haven't already.\n                        </p>\n                    </div>\n                </div>\n                : null}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => state, { sendEmail, emailSent, getValue, getVin, addYear, addMake, addModel, addStyle, addLowPrice, addHighPrice, addUvc, addBasePrice })(Price)\n"]},"metadata":{},"sourceType":"module"}